# Blogger üìù ‚Äî full-stack –±–ª–æ–≥-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ (Next.js + Prisma + Postgres)

## üåç Production / Vercel

**–°–∞–π—Ç –≤ –ø—Ä–æ–¥–µ:** https://websiteblogger.vercel.app/  
–î–µ–ø–ª–æ–π —Å–¥–µ–ª–∞–Ω –Ω–∞ **Vercel**, –ø—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º –ø–æ —Å—Å—ã–ª–∫–µ (–ü–ö/—Ç–µ–ª–µ—Ñ–æ–Ω/–ø–ª–∞–Ω—à–µ—Ç).

---

## üñºÔ∏è –í–ê–ñ–ù–û –ü–†–û –ö–ê–†–¢–ò–ù–ö–ò (–ø—Ä–æ—á–∏—Ç–∞–π!)

‚ö†Ô∏è **–í–ê–ñ–ù–û: –∑–∞–≥—Ä—É–∑–∫–∞/–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞.**  
–ö–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω—é—é —Ñ–∞–π–ª–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (UploadThing / ufs.sh –∏ —Ç.–ø.).  
–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–≥–∏–æ–Ω–∞—Ö –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ü–û –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**.  
**–ë–µ–∑ –Ω–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–µ –ø—Ä–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ.**

---

## üöÄ –î–µ–ø–ª–æ–π –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- **Hosting / Serverless:** Vercel (Next.js App Router)
- **Database:** PostgreSQL (Neon)
- **ORM:** Prisma
- **Auth:** JWT –≤ **httpOnly cookies**
- **Uploads:** UploadThing (–¥–≤–∞ —Ç–æ–∫–µ–Ω–∞: –ø–æ—Å—Ç—ã / –∞–≤–∞—Ç–∞—Ä—ã)
- **Notifications:** —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∏–∫–æ–Ω–∫–∞ üîî –≤ Navbar)

---

## üß† –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—á—Ç–æ —É–º–µ–µ—Ç —Å–∞–π—Ç)

### üë§ –ê–∫–∫–∞—É–Ω—Ç –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥
- JWT —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `httpOnly` cookie `token`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `GET /api/auth/me`
- –í—ã—Ö–æ–¥: `POST /api/auth/logout`

### üìù –ü–æ—Å—Ç—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ (—Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π/–±–µ–∑)  
  `POST /api/posts`
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–∞ –ø–æ —Å—Å—ã–ª–∫–µ `/posts/[post_id]`
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ `/posts/[post_id]/edit`
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –∏–ª–∏ –∞–¥–º–∏–Ω–æ–º  
  `DELETE /api/posts/[postId]`
- –ï—Å–ª–∏ —É –ø–æ—Å—Ç–∞ –±—ã–ª–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞ (UploadThing key) ‚Äî –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–Ω–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### üè∑ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î (`Category`)
- –ü–æ—Å—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### üë• –ü–æ–¥–ø–∏—Å–∫–∏ (Follow / Unfollow)
- –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è / –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
  `POST /api/follow` / `DELETE /api/follow?username=...`
- –°—Ç—Ä–∞–Ω–∏—Ü—ã:
  - `/u/[username]` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å
  - `/u/[username]/followers` ‚Äî –ø–æ–¥–ø–∏—Å—á–∏–∫–∏
  - `/u/[username]/following` ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏

### üì∞ –õ–µ–Ω—Ç–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (Following Feed)
- `/followingFeed` ‚Äî –ª–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Ç—ã –ø–æ–¥–ø–∏—Å–∞–Ω

---

## üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫ –≤ Navbar)

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ª–µ–∂–∞—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `Notification` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ üîî.

### –ö–∞–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç
- **NEW_POST** ‚Äî –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –ø–æ–¥–ø–∏—Å–∞–Ω, –ø—É–±–ª–∏–∫—É–µ—Ç –Ω–æ–≤—ã–π –ø–æ—Å—Ç  
  (—Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ `POST /api/posts`)
- **WARN** ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω–∞
- **BAN** ‚Äî –±–∞–Ω –æ—Ç –∞–¥–º–∏–Ω–∞
- **UNBAN** ‚Äî —Ä–∞–∑–±–∞–Ω –æ—Ç –∞–¥–º–∏–Ω–∞
- **DELETE_POST** ‚Äî –∞–¥–º–∏–Ω —É–¥–∞–ª–∏–ª –ø–æ—Å—Ç (—Å –ø—Ä–∏—á–∏–Ω–æ–π –∏–ª–∏ –±–µ–∑)

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `GET /api/notifications` ‚Äî —Å–ø–∏—Å–æ–∫ + –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- `POST /api/notifications/read` ‚Äî –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å—ë –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- `POST /api/notifications/clear` ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## üõ° –ê–¥–º–∏–Ω-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (ADMIN)

–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ server routes:

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è
- **WARN user**  
  `POST /api/admin/users/warn` (—Å reason)
- **BAN user**  
  `POST /api/admin/users/ban` (—Å reason)
- **UNBAN user**  
  `POST /api/admin/users/unban`
- **DELETE —á—É–∂–æ–π –ø–æ—Å—Ç**  
  `POST /api/admin/posts/delete` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å reason)

### üîí –ó–∞—â–∏—Ç—ã –æ—Ç ‚Äú—à–∞–ª–æ—Å—Ç–µ–π‚Äù (–≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ –∫–æ–¥)
- –∞–¥–º–∏–Ω **–Ω–µ –º–æ–∂–µ—Ç** –±–∞–Ω–∏—Ç—å —Å–∞–º–æ–≥–æ —Å–µ–±—è
- –∞–¥–º–∏–Ω **–Ω–µ –º–æ–∂–µ—Ç** –±–∞–Ω–∏—Ç—å/–≤–∞—Ä–Ω–∏—Ç—å –¥—Ä—É–≥–æ–≥–æ –∞–¥–º–∏–Ω–∞
- –∞–¥–º–∏–Ω **–Ω–µ –º–æ–∂–µ—Ç** –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **—Å–≤–æ–π** –ø–æ—Å—Ç (–≤ delete-—Ä–æ—É—Ç–µ —Å—Ç–æ–∏—Ç –∑–∞—â–∏—Ç–∞)
- –ø—Ä–∏ –±–∞–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å—Ç–∞–≤–∏—Ç—Å—è `isBanned=true`, –∞ –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è cookie `banned=1`
- middleware (`src/middleware.ts`) —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –∑–∞–±–∞–Ω–µ–Ω–Ω–æ–≥–æ –Ω–∞ `/banned`

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (Settings)
–°—Ç—Ä–∞–Ω–∏—Ü–∞: `/settings`

API:
- `PATCH /api/users/update-profile` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `username/email/avatar`
- `POST /api/users/change-password` ‚Äî —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è

---

## üì¶ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (ENV)

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:

- `DATABASE_URL` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL (Neon)
- `JWT_SECRET` ‚Äî —Å–µ–∫—Ä–µ—Ç –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ JWT
- `UPLOADTHING_TOKEN_POST` ‚Äî —Ç–æ–∫–µ–Ω UploadThing –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –ø–æ—Å—Ç–æ–≤ (`/api/uploadthing`)
- `UPLOADTHING_TOKEN_AVATAR` ‚Äî —Ç–æ–∫–µ–Ω UploadThing –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫ (`/api/uploadthing-avatar`)

> ‚ö†Ô∏è –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

---

## üß± Prisma / –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°—Ö–µ–º–∞: `prisma/schema.prisma`

–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- `User` (—Ä–æ–ª—å `USER/ADMIN`, –±–∞–Ω-–ø–æ–ª—è `isBanned/banReason/bannedAt`)
- `Post` (id = `post_id`, –∫–∞—Ä—Ç–∏–Ω–∫–∞ `img_post` –∏ `imgPostKey`)
- `Category`
- `Follow`
- `Notification`
- `ModerationAction` (WARN/BAN/UNBAN/DELETE_POST)

---

## üß™ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
npm install

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env (–ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î –∏–ª–∏ Neon)

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
npx prisma migrate dev

–ó–∞–ø—É—Å–∫:
npm run dev

---

## üñº –°–∫—Ä–∏–Ω—à–æ—Ç—ã (–º–µ—Å—Ç–∞ –ø–æ–¥ –±–∞–∑–æ–≤—ã–µ)

> –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É `./screenshots/` –∏ –ø–æ–ª–æ–∂–∏ —Ç—É–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ç–∞–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏.

### 1) –ì–ª–∞–≤–Ω–∞—è (–ª–µ–Ω—Ç–∞ / –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ / –ø–æ—Å—Ç—ã)


![–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](./screenshots/home.png)


### 2) –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞


![–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ—Å—Ç–∞](./screenshots/post.png)


### 3) –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 


![–ü—Ä–æ—Ñ–∏–ª—å](./screenshots/profile.png)


### 4) –ê–¥–º–∏–Ω-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–º–µ—Ä: warn / ban / delete post)


![–ê–¥–º–∏–Ω](./screenshots/admin.png)

![–ê–¥–º–∏–Ω](./screenshots/admin_2.png)


---

## üìå –ú–µ–ª–æ—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –∑–Ω–∞—Ç—å

- –í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å middleware (`src/middleware.ts`) –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –∑–∞–±–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- –í `next.config.ts` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã `images.remotePatterns` –ø–æ–¥ –¥–æ–º–µ–Ω—ã UploadThing / ufs.sh –∏ –¥—Ä—É–≥–∏–µ –≤–Ω–µ—à–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.
- –í `package.json` –µ—Å—Ç—å `postinstall: prisma generate` (–≤–∞–∂–Ω–æ –¥–ª—è Vercel).
- Production –±–∞–∑–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∞ –≤ Neon (PostgreSQL).
- JWT —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ httpOnly cookie –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º.
- Role-based –¥–æ—Å—Ç—É–ø (USER / ADMIN) –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –Ω–∞ backend.

---

## ‚úÖ –ò—Ç–æ–≥

–≠—Ç–æ production-ready full-stack –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å:

- –ø–æ—Å—Ç–∞–º–∏ + –∑–∞–≥—Ä—É–∑–∫–æ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (Follow / Unfollow)
- —Å–∏—Å—Ç–µ–º–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (üîî)
- —Ä–æ–ª—è–º–∏ (USER / ADMIN)
- –∞–¥–º–∏–Ω-–º–æ–¥–µ—Ä–∞—Ü–∏–µ–π (warn / ban / unban / delete post)
- –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏ –ø–∞—Ä–æ–ª—è
- PostgreSQL + Prisma + Neon
- –¥–µ–ø–ª–æ–µ–º –Ω–∞ Vercel

**Live:** https://websiteblogger.vercel.app/